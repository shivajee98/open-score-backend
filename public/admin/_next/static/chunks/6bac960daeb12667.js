(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62398,e=>{"use strict";let t="https://api.msmeloan.sbs/api",s=async()=>{{let e=localStorage.getItem("token");if(e)return e}return null},a=async(e,a={})=>{let l=await s(),r={"Content-Type":"application/json",Accept:"application/json",...l&&{Authorization:`Bearer ${l}`},...a.headers},n=e.startsWith("/")?`${t}${e}`:`${t}/${e}`,i=await fetch(n,{...a,headers:r});if(!i.ok){401!==i.status||n.includes("/auth/")||(console.warn("[API] 401 Unauthorized - clearing token cache"),localStorage.removeItem("token"),localStorage.removeItem("user"));let e={};try{e=await i.json()}catch(e){console.error("[API] Failed to parse error response",e)}let t=e.error||e.message||`HTTP Error ${i.status}`;throw console.error(`[API Error] ${t}`,e),Error(t)}return i.json()};e.s(["apiFetch",0,a])},28348,e=>{"use strict";let t=(0,e.i(49120).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>t],28348)},54604,e=>{"use strict";let t=(0,e.i(49120).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],54604)},93815,e=>{"use strict";let t=(0,e.i(49120).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],93815)},36934,e=>{"use strict";let t=(0,e.i(49120).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],36934)},22804,e=>{"use strict";var t=e.i(84441),s=e.i(43844),a=e.i(62398);let l=(0,e.i(49120).default)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var r=e.i(28348),n=e.i(54604),i=e.i(93815),d=e.i(36934);function c(){let[e,c]=(0,s.useState)(!0),[o,x]=(0,s.useState)(!1),[m,u]=(0,s.useState)({is_enabled:!0,signup_bonus:100,loan_disbursement_bonus:250}),[p,h]=(0,s.useState)([]),[b,f]=(0,s.useState)({total_referrals:0,total_signup_paid:0,total_loan_paid:0,total_amount_paid:0});(0,s.useEffect)(()=>{j()},[]);let j=async()=>{try{let e=await (0,a.apiFetch)("/admin/referral-settings");u(e);let t=(await (0,a.apiFetch)("/admin/all-referrals")).data||[];h(t);let s=t.length,l=t.reduce((e,t)=>e+(t.signup_bonus_paid?Number(t.signup_bonus_earned):0),0),r=t.reduce((e,t)=>e+(t.loan_bonus_paid?Number(t.loan_bonus_earned):0),0);f({total_referrals:s,total_signup_paid:l,total_loan_paid:r,total_amount_paid:l+r})}catch(e){console.error("Failed to fetch data:",e)}finally{c(!1)}},g=async()=>{x(!0);try{await (0,a.apiFetch)("/admin/referral-settings",{method:"PUT",body:JSON.stringify(m)}),alert("Settings saved successfully!")}catch(e){console.error("Failed to save settings:",e),alert("Failed to save settings")}finally{x(!1)}};return e?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"w-10 h-10 border-4 border-slate-900 border-t-transparent rounded-full animate-spin"})}):(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"Referral System"}),(0,t.jsx)("p",{className:"text-slate-600",children:"Manage referral settings and track performance"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(r.Users,{className:"w-5 h-5 text-blue-600"})}),(0,t.jsx)("span",{className:"text-slate-500 text-sm font-medium",children:"Total Referrals"})]}),(0,t.jsx)("p",{className:"text-3xl font-black text-slate-900",children:b.total_referrals})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(l,{className:"w-5 h-5 text-green-600"})}),(0,t.jsx)("span",{className:"text-slate-500 text-sm font-medium",children:"Signup Bonuses"})]}),(0,t.jsxs)("p",{className:"text-3xl font-black text-slate-900",children:["₹",b.total_signup_paid.toLocaleString("en-IN")]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)(n.TrendingUp,{className:"w-5 h-5 text-purple-600"})}),(0,t.jsx)("span",{className:"text-slate-500 text-sm font-medium",children:"Loan Bonuses"})]}),(0,t.jsxs)("p",{className:"text-3xl font-black text-slate-900",children:["₹",b.total_loan_paid.toLocaleString("en-IN")]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,t.jsx)(l,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("span",{className:"text-white/80 text-sm font-medium",children:"Total Paid"})]}),(0,t.jsxs)("p",{className:"text-3xl font-black",children:["₹",b.total_amount_paid.toLocaleString("en-IN")]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)(i.Settings,{className:"w-6 h-6 text-slate-900"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-black text-slate-900",children:"Referral Settings"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm",children:"Configure referral bonus amounts"})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-slate-900",children:"Enable Share & Earn"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Allow users to earn referral bonuses"})]}),(0,t.jsx)("button",{onClick:()=>u({...m,is_enabled:!m.is_enabled}),className:`w-14 h-8 rounded-full p-1 transition-colors ${m.is_enabled?"bg-green-500":"bg-slate-300"}`,children:(0,t.jsx)("div",{className:`w-6 h-6 bg-white rounded-full transition-transform ${m.is_enabled?"translate-x-6":""}`})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Signup Bonus Amount"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 font-bold",children:"₹"}),(0,t.jsx)("input",{type:"number",value:m.signup_bonus,onChange:e=>u({...m,signup_bonus:parseFloat(e.target.value)||0}),className:"w-full pl-8 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-900 focus:outline-none focus:border-blue-500",min:"0",step:"10"})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Bonus credited to referrer when new user signs up (default: ₹100)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Loan Disbursement Bonus Amount"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 font-bold",children:"₹"}),(0,t.jsx)("input",{type:"number",value:m.loan_disbursement_bonus,onChange:e=>u({...m,loan_disbursement_bonus:parseFloat(e.target.value)||0}),className:"w-full pl-8 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-900 focus:outline-none focus:border-blue-500",min:"0",step:"10"})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Bonus credited to referrer when referred user's loan is disbursed (default: ₹250)"})]}),(0,t.jsx)("button",{onClick:g,disabled:o,className:"w-full py-3 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:o?(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Save,{className:"w-5 h-5"}),"Save Settings"]})})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-slate-200",children:[(0,t.jsx)("h2",{className:"text-xl font-black text-slate-900 mb-6",children:"Recent Referrals"}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase",children:"Referrer"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase",children:"Referred"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase",children:"Code"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase",children:"Signup Bonus"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase",children:"Loan Bonus"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-xs font-bold text-slate-500 uppercase",children:"Date"})]})}),(0,t.jsx)("tbody",{children:p.slice(0,20).map((e,s)=>(0,t.jsxs)("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[(0,t.jsx)("td",{className:"py-3 px-4 text-sm font-medium text-slate-900",children:e.referrer?.name||e.referrer?.mobile_number||"N/A"}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm font-medium text-slate-900",children:e.referred?.name||e.referred?.mobile_number||"N/A"}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm font-mono font-bold text-slate-600",children:e.referral_code}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-bold text-green-600",children:["₹",Number(e.signup_bonus_earned||0).toLocaleString("en-IN")]}),e.signup_bonus_paid&&(0,t.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Paid"})]})}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-bold text-purple-600",children:["₹",Number(e.loan_bonus_earned||0).toLocaleString("en-IN")]}),e.loan_bonus_paid&&(0,t.jsx)("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:"Paid"})]})}),(0,t.jsx)("td",{className:"py-3 px-4 text-sm text-slate-500",children:new Date(e.created_at).toLocaleDateString()})]},s))})]}),0===p.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(r.Users,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-slate-500 font-medium",children:"No referrals yet"})]})]})]})]})}e.s(["default",()=>c],22804)}]);